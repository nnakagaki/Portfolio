<!DOCTYPE html>
<html>
<head>
  <title>Norris Nakagaki Portfolio</title>
  <%= stylesheet_link_tag    'application', media: 'all' %>
  <%= javascript_include_tag 'application' %>
  <%= csrf_meta_tags %>
  <link href='http://fonts.googleapis.com/css?family=Righteous' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Oswald&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
</head>

<script>
  if (Portfolio.utils.isSafari()) {
    Portfolio.ProjectsSection.videoUrls = {
      LLC       : "<%= video_url('LLC_demo.mp4') %>",
      princess  : "<%= video_url('princess_demo_test.mp4') %>",
      asteroids : "<%= video_url('asteroids_gameplay_editted2.mp4') %>",
      snake     : "<%= video_url('snake_gameplay_cropped.mp4') %>",
      trello    : "<%= video_url('trello_demo_cropped.mp4') %>",
      chess     : "<%= video_url('chess_demo.mp4') %>"
    };
  } else {
    Portfolio.ProjectsSection.videoUrls = {
      LLC       : "<%= video_url('LLC_demo.ogg') %>",
      princess  : "<%= video_url('princess_demo_test.ogg') %>",
      asteroids : "<%= video_url('asteroids_gameplay_editted2.ogg') %>",
      snake     : "<%= video_url('snake_gameplay_cropped.ogg') %>",
      trello    : "<%= video_url('trello_demo_cropped.ogg') %>",
      chess     : "<%= video_url('chess_demo.ogg') %>"
    };
  }
</script>

<body>
  <%= render :partial => 'shared/sidebar' %>
  <div class="shadow hidden"></div>
  <div class="window">
  	<main>
  		<%= render :partial => 'shared/intro_section' %>
  		<%= render :partial => 'shared/projects_section' %>
      <%= render :partial => 'shared/skills_section' %>
      <%= render :partial => 'shared/about_section' %>
  		<%= render :partial => 'shared/contact_me_section' %>
  	</main>
  </div>

  <div class="asteroids hidden">
  <%= render :partial => 'games/asteroids' %>
  </div>

  <div class="snake-game hidden">
  <%= render :partial => 'games/snakeGame' %>
  </div>

	<%= yield %>

</body>

<script>
  Portfolio.ProjectsSection.initialize();
  Portfolio.ContactMeSection.initialize();
  Portfolio.SkillsSection.initialize();
  Portfolio.sidebar.initialize();

  $(".shadow").on("click", function (event) {
    $("iframe").remove();
    $(".info-modal").remove();
    $(event.currentTarget).addClass("hidden");
    $(".window").removeClass("hide-overflow");
    $(".asteroids").addClass("hidden");
    Asteroids.Music.menuAudio.pause();
    Asteroids.Music.menuAudio.currentTime = 0;
    if (typeof window.ast !== "undefined") {
      window.ast.closeGame();
    }

    $(".snake-game").addClass("hidden");

    $(window).scrollTop(window.yCorrToReturnTo);
  });

  $(".next-section-triangle").on("click", function (event) {
    $('html, body').animate({
      scrollTop: $("main .main-section."+$(event.currentTarget).data("next-section")).offset().top
    }, 300);
  });
</script>

</html>
